import{b as $}from"./chunk-WM6SSQJR.js";import"./chunk-ZWZ4B73B.js";import{a as O}from"./chunk-MAJIHMK4.js";import{a as j}from"./chunk-7KJGLARE.js";import"./chunk-LPABG7ES.js";import"./chunk-KXLXBALE.js";import{a as W}from"./chunk-WLREW4AM.js";import{a as L}from"./chunk-QZQ57QC5.js";import{d as k,e as x,h as E,i as T,k as V,m as N,n as G,p as I,q as R,s as M,t as z}from"./chunk-MJMJ6QEK.js";import"./chunk-LCXEAPVZ.js";import{a as H,b as J}from"./chunk-OF7MEPLT.js";import"./chunk-ES77FXIX.js";import"./chunk-5BF4NUEH.js";import{e as P,s as S}from"./chunk-PWXOGFPV.js";import{Ab as w,Ea as y,Fb as B,Gb as D,Ia as l,Ta as v,ba as n,fb as f,ja as s,jb as b,ka as c,kb as _,lb as U,mb as i,nb as o,ob as p,pb as F,qb as d,x as h,xb as A,yb as C}from"./chunk-4S75Y5RT.js";function K(u,r){if(u&1&&p(0,"app-tag",12),u&2){let e=r.$implicit;f("tagName",e.name)}}var q=class u{fb=n(N);router=n(S);userApi=n(j);categoryApi=n(H);bottomSheetService=n(M);modalReactiveService=n(R);profileUpdateForm;previewUrl=null;get categoryArray(){return this.profileUpdateForm.get("categories")}constructor(){this.profileUpdateForm=this.fb.group({nickname:"",bio:"",categories:this.fb.array([]),file:""}),h({profile:this.userApi.getProfile(),categories:this.categoryApi.fetchFavCategories()}).subscribe(({profile:r,categories:e})=>{this.profileUpdateForm.patchValue({nickname:r.nickname,bio:r.bio}),this.previewUrl=r.imageUrl,e.forEach(t=>this.categoryArray.push(this.fb.control(t)))})}onFileSelected(r){let e=r.target;if(e.files&&e.files.length>0){let t=e.files[0];this.profileUpdateForm.patchValue({file:t});let a=new FileReader;a.onload=m=>{this.previewUrl=m.target?.result},a.readAsDataURL(t)}}updateCategory(){let r=this.categoryArray.value;this.bottomSheetService.open($,r).subscribe(e=>{e&&(this.categoryArray.clear(),e.forEach(t=>this.categoryArray.push(this.fb.control(t))))})}updateProfile(){let r={title:"\uD504\uB85C\uD544 \uD3B8\uC9D1 \uC644\uB8CC",subTitle:"\uD504\uB85C\uD544 \uD3B8\uC9D1\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.",content:"\uD655\uC778 \uBC84\uD2BC\uC744 \uB204\uB974\uC2DC\uBA74 \uD648 \uD654\uBA74\uC73C\uB85C \uB3CC\uC544\uAC11\uB2C8\uB2E4. \uD655\uC778\uBC84\uD2BC\uC744 \uB20C\uB7EC\uC8FC\uC138\uC694.",buttons:["\uD655\uC778"]};this.modalReactiveService.open(r).subscribe(()=>{this.router.navigateByUrl("/profile")})}static \u0275fac=function(e){return new(e||u)};static \u0275cmp=v({type:u,selectors:[["profile-update-page"]],decls:21,vars:6,consts:[["fileInput",""],[1,"flex","flex-col","min-h-screen","border-x","bg-secondary5"],["title","\uD504\uB85C\uD544 \uC218\uC815"],[1,"flex","flex-col","flex-1","w-full","gap-5","px-4","py-6"],[1,"relative","mx-auto","w-fit"],["alt","\uC0AC\uC6A9\uC790 \uD504\uB85C\uD544 \uC774\uBBF8\uC9C0",1,"block","mx-auto","bg-white","rounded-full","size-28",3,"src"],[1,"absolute","bottom-0","right-0","w-12","h-12","bg-white","border","rounded-full","hover:bg-blue-500",3,"click"],["type","file","accept","image/*","hidden","",3,"change"],[3,"formGroup"],["formControlName","nickname","label","\uB2C9\uB124\uC784"],["type","textarea","formControlName","bio","label","\uC790\uAE30\uC18C\uAC1C"],[1,"flex","gap-2"],["appearance","outline","size","s",3,"tagName"],[1,"flex","flex-col","gap-2"],["text","\uAD00\uC2EC\uD0DC\uADF8 \uBCC0\uACBD","width","full",1,"w-full",3,"click"],["buttonText","\uD504\uB85C\uD544 \uD3B8\uC9D1 \uC644\uB8CC",3,"handleButton","form"],[1,"sticky","bottom-0","mt-auto"]],template:function(e,t){if(e&1){let a=F();i(0,"div",1),p(1,"app-header",2),i(2,"div",3)(3,"div",4),p(4,"img",5),i(5,"button",6),d("click",function(){s(a);let g=A(8);return c(g.click())}),C(6,"+"),o(),i(7,"input",7,0),d("change",function(g){return s(a),c(t.onFileSelected(g))}),o()(),i(9,"form",8),p(10,"app-input",9)(11,"app-input",10),o(),i(12,"div",11),_(13,K,1,1,"app-tag",12,b),o(),C(15),B(16,"json"),i(17,"div",13)(18,"app-button",14),d("click",function(){return s(a),c(t.updateCategory())}),o(),i(19,"app-profile-update-button",15),d("handleButton",function(){return s(a),c(t.updateProfile())}),o()()(),p(20,"app-footer",16),o()}e&2&&(l(4),f("src",t.previewUrl,y),l(5),f("formGroup",t.profileUpdateForm),l(4),U(t.categoryArray.value),l(2),w(" ",D(16,4,t.profileUpdateForm.value)," "),l(4),f("form",t.profileUpdateForm))},dependencies:[J,I,W,G,E,k,x,T,V,P,L,z,O],encapsulation:2})};export{q as ProfileUpdatePage};
