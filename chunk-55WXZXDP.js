import{a as h}from"./chunk-YY2OMW4C.js";import{a as O}from"./chunk-AYOMIFAR.js";import"./chunk-7KJGLARE.js";import{a as j}from"./chunk-IZOR5LZS.js";import{a as U}from"./chunk-WLREW4AM.js";import{a as $}from"./chunk-QZQ57QC5.js";import{p as f,q as R,s as v}from"./chunk-MJMJ6QEK.js";import"./chunk-LCXEAPVZ.js";import"./chunk-OF7MEPLT.js";import"./chunk-ES77FXIX.js";import"./chunk-5BF4NUEH.js";import{p as F,q as N,s as S}from"./chunk-PWXOGFPV.js";import{B as I,Ea as k,Ia as c,Ta as C,Za as _,ba as s,cb as E,db as w,fb as m,ib as B,ja as A,jb as b,ka as T,kb as g,lb as x,mb as i,nb as n,ob as p,pb as M,qb as a,rb as d,yb as u,zb as P}from"./chunk-4S75Y5RT.js";function W(o,t){if(o&1){let e=M();i(0,"div",2)(1,"input",4),a("change",function(r){let z=A(e).$implicit,H=d();return T(H.selectCollection(z.id,r))}),n(),p(2,"app-collection-card",5),n()}if(o&2){let e=t.$implicit,l=d();c(),m("checked",l.selectedCollectionId===e.id),c(),m("post",e)}}var D=class o{postId;selectedCollectionId;collections=[];bottomSheetService=s(v);collectionApi=s(j);postApi=s(h);constructor(){this.postId=this.bottomSheetService.data,this.collectionApi.getCollections().subscribe(t=>{this.collections=t.items})}selectCollection(t,e){e.target.checked&&(this.selectedCollectionId=t)}movePost(){let t={postIds:[this.postId],collectionId:this.selectedCollectionId};console.log(t),this.postApi.movePost(t).subscribe(()=>{this.bottomSheetService.close("success")})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["post-move"]],decls:5,vars:0,consts:[[1,"flex","w-[32rem]","flex-col","gap-4","rounded-t-lg","bg-white","p-8"],[1,"grid","grid-cols-2","gap-5","pb-5"],[1,""],["text","\uC120\uD0DD \uD3F4\uB354\uB85C \uC774\uB3D9",3,"click"],["type","checkbox",1,"absolute","z-20","w-6","h-6",3,"change","checked"],[3,"post"]],template:function(e,l){e&1&&(i(0,"div",0)(1,"div",1),g(2,W,3,2,"div",2,b),n(),i(4,"app-button",3),a("click",function(){return l.movePost()}),n()()),e&2&&(c(2),x(l.collections))},dependencies:[f,O],encapsulation:2})};var y=class o{collectionId=void 0;postId=void 0;modalReactiveService=s(R);bottomSheetService=s(v);postApi=s(h);router=s(S);constructor(){let{collectionId:t,postId:e}=this.bottomSheetService.data;this.collectionId=t,this.postId=e,this.router.events.pipe(I(l=>l instanceof F)).subscribe(()=>{this.bottomSheetService.close()})}updatePost(){this.router.navigateByUrl(`post/update/${this.postId}`,{state:{postId:this.postId,collectionId:this.collectionId}})}movePost(){this.bottomSheetService.close(),this.bottomSheetService.open(D,this.postId).subscribe(t=>{if(t==="success"){let e={title:"\uAC8C\uC2DC\uBB3C \uC774\uB3D9 \uC644\uB8CC",subTitle:"\uAC8C\uC2DC\uBB3C \uC774\uB3D9\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.",content:"\uD655\uC778 \uBC84\uD2BC\uC744 \uB204\uB974\uC2DC\uBA74 \uD648\uD654\uBA74\uC73C\uB85C \uB3CC\uC544\uAC11\uB2C8\uB2E4. \uD655\uC778\uBC84\uD2BC\uC744 \uB20C\uB7EC\uC8FC\uC138\uC694.",buttons:["\uD655\uC778"]};this.modalReactiveService.open(e).subscribe()}})}deletePost(){let t={title:"\uAC8C\uC2DC\uBB3C \uC0AD\uC81C",subTitle:"\uC120\uD0DD\uD558\uC2E0 \uAC8C\uC2DC\uBB3C\uC744 \uC0AD\uC81C\uD569\uB2C8\uB2E4.",content:"\uC0AD\uC81C \uBC84\uD2BC\uC744 \uB204\uB974\uC2DC\uBA74 \uD574\uB2F9 \uAC8C\uC2DC\uBB3C\uC774 \uC0AD\uC81C\uB429\uB2C8\uB2E4. \uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uC0AD\uC81C\uB97C \uC6D0\uD558\uC9C0 \uC54A\uC744 \uACBD\uC6B0 \uCDE8\uC18C \uBC84\uD2BC\uC744 \uB20C\uB7EC\uC8FC\uC138\uC694.",buttons:["\uCDE8\uC18C","\uD655\uC778"]};this.bottomSheetService.close(),this.modalReactiveService.open(t).subscribe(e=>{console.log("\uC120\uD0DD\uB41C \uBC84\uD2BC:",e),e==="\uD655\uC778"&&this.postApi.deletePost([this.postId]).subscribe(()=>{let l={title:"\uAC8C\uC2DC\uBB3C \uC0AD\uC81C \uC644\uB8CC",subTitle:"\uAC8C\uC2DC\uBB3C \uC0AD\uC81C\uAC00 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.",content:"\uD655\uC778\uBC84\uD2BC\uC744 \uB204\uB974\uBA74 \uD654\uBA74\uC73C\uB85C \uB3CC\uC544\uAC11\uB2C8\uB2E4. \uD655\uC778\uBC84\uD2BC\uC744 \uB20C\uB7EC\uC8FC\uC138\uC694.",buttons:["\uD655\uC778"]};this.modalReactiveService.open(l).subscribe(()=>{this.router.navigateByUrl(`/collection/${this.collectionId}`)})})})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["post-action"]],decls:5,vars:0,consts:[[1,"flex","w-[32rem]","flex-col","gap-4","rounded-t-lg","bg-white","p-8"],[1,"w-12","h-1","mx-auto","rounded-full","bg-gray70"],["text","\uAC8C\uC2DC\uBB3C \uC218\uC815\uD558\uAE30","width","full",3,"click"],["text","\uAC8C\uC2DC\uBB3C \uC774\uB3D9\uD558\uAE30","width","full",3,"click"],["text","\uAC8C\uC2DC\uBB3C \uC0AD\uC81C\uD558\uAE30","width","full",3,"click"]],template:function(e,l){e&1&&(i(0,"div",0),p(1,"div",1),i(2,"app-button",2),a("click",function(){return l.updatePost()}),n(),i(3,"app-button",3),a("click",function(){return l.movePost()}),n(),i(4,"app-button",4),a("click",function(){return l.deletePost()}),n()())},dependencies:[f],encapsulation:2})};var G=()=>[import("./chunk-IEVFULJT.js").then(o=>o.TagComponent)];function J(o,t){if(o&1&&(i(0,"li",12),u(1),n()),o&2){let e=d().$implicit;c(),P(e.content)}}function K(o,t){if(o&1&&_(0,J,2,1,"li",12),o&2){let e=t.$implicit;B(e.isPublic?0:-1)}}function Q(o,t){if(o&1&&(i(0,"div",6),p(1,"img",7),i(2,"div",8),p(3,"app-tag",9),i(4,"span"),u(5),n()(),i(6,"div",10)(7,"span",11),u(8,"\uAC8C\uC2DC\uBB3C \uB0B4\uC6A9"),n(),i(9,"div"),u(10),n()(),i(11,"div",10)(12,"span",11),u(13,"\uC0AC\uC9C4\uB0B4\uC6A9"),n(),i(14,"ul"),g(15,K,1,1,null,null,b),n()()()),o&2){let e=d(2);c(),m("src",e.post.imageUrl,k),c(2),m("tagName",e.post.category==null?null:e.post.category.name),c(2),P(e.post.collection.title),c(5),P(e.post.content),c(5),x(e.post.metadataList)}}function X(o,t){if(o&1&&_(0,Q,17,4,"div",6),o&2){let e=d();B(e.post?0:-1)}}function Y(o,t){o&1&&(i(0,"div",13),u(1,"\uAC8C\uC2DC\uBB3C \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694."),n())}var q=class o{collectionId=void 0;post=void 0;bottomSheetService=s(v);router=s(S);route=s(N);postApi=s(h);constructor(){let t=this.route.snapshot.paramMap.get("id");this.collectionId=this.router.getCurrentNavigation()?.extras.state?.collectionId,this.collectionId&&this.postApi.getPost(this.collectionId,t).subscribe(e=>{this.post=e})}goPage(){this.router.navigateByUrl(`collection/${this.collectionId}`)}openBottomSheet(){let t={collectionId:this.collectionId,postId:this.post?.postId};this.bottomSheetService.open(y,t).subscribe()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["post-detail-page"]],decls:11,vars:1,consts:[[1,"flex","flex-col","min-h-screen","border-x","bg-secondary5"],[3,"title"],["rightContent","",1,"text-lg","font-bold",3,"click"],[1,"flex-1","w-full","px-4","py-6"],["text","\uBAA9\uB85D\uC73C\uB85C \uB3CC\uC544\uAC00\uAE30","width","full",3,"click"],[1,"sticky","bottom-0","mt-auto"],[1,"flex","flex-col","gap-5","bg-white"],["alt","\uC784\uC2DC \uC774\uBBF8\uC9C0",1,"h-[485px]","rounded-lg",3,"src"],[1,"flex","items-center","justify-between","px-2","pb-4","border-b","border-b-gray-200"],[3,"tagName"],[1,"flex","flex-col","gap-2","px-2"],[1,"text-lg","font-bold"],[1,"list-disc","list-inside"],[1,"flex","flex-col","items-center","justify-center","min-h-screen","text-center","bg-white"]],template:function(e,l){if(e&1&&(i(0,"div",0)(1,"app-header",1)(2,"button",2),a("click",function(){return l.openBottomSheet()}),u(3,"..."),n()(),i(4,"main",3),_(5,X,1,1)(6,Y,2,0),E(7,5,G,6),w(),i(9,"app-button",4),a("click",function(){return l.goPage()}),n()(),p(10,"app-footer",5),n()),e&2){let r;c(),m("title",(r=l.post==null?null:l.post.title)!==null&&r!==void 0?r:"")}},dependencies:[f,U,$],encapsulation:2})};export{y as PostActionComponent,q as PostDetailPage,D as PostMoveComponent};
